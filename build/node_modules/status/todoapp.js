// from http://www.inventpartners.com/content/javascript_is_int

(function(){
  var root = this;

  root.is_int = function(value){ 
    if((parseFloat(value) == parseInt(value)) && !isNaN(value)){
        return true;
    } else { 
        return false;
    } 
  }

  var isServer = (typeof require !== 'undefined');
  var Backbone = root.Backbone;
  var _ = root._;
  if (!Backbone && isServer) var Backbone = require('backbone');
  if (!_ && isServer) var _ = require('underscore')._;

  var todoapp = {};

  todoapp = {
    // Assist with code organization, by breaking up logical components of code
    // into modules.
    module: function() {
      // Internal module cache.
      var modules = {};

      // Create a new module reference scaffold or load an existing module.
      return function(name) {
        // If this module has already been created, return it.
        if (modules[name]) {
          return modules[name];
        }

        // Create a module and save it under this name
        return modules[name] = { Views: {} };
      };
    }(),

    // Keep active application instances namespaced under an app object.
    app: _.extend({}, Backbone.Events),

    init: function() {
      if(!_.isUndefined(this.Todos)) {
        return this.Todos;
      }
      var TodoList = this.module('todolist');
      var Todos = this.Todos = new TodoList.Collection;
      if(!isServer) {
        root.App = new TodoList.Views.AppView({collection: Todos});
      }
    }
  };

  root.todoapp = todoapp;

}).call(this)

